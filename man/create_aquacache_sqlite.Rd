% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_aquacache_sqlite.R
\name{create_aquacache_sqlite}
\alias{create_aquacache_sqlite}
\title{Create a small SQLite copy of the AquaCache database}
\usage{
create_aquacache_sqlite(
  con,
  file,
  continuous_locations = NULL,
  discrete_locations = NULL,
  overwrite = TRUE
)
}
\arguments{
\item{con}{An open connection to the AquaCache PostgreSQL database.  Use \code{\link[=AquaConnect]{AquaConnect()}} to create this connection.}

\item{file}{Path to the SQLite file to create.}

\item{continuous_locations}{Character vector of location codes to retain in continuous tables.  Defaults to the first location found in the database when \code{NULL}.}

\item{discrete_locations}{Character vector of location codes to retain in discrete tables.  Defaults to \code{continuous_locations} when \code{NULL}.}

\item{overwrite}{Logical. Overwrite \code{file} if it already exists.}
}
\value{
The path to the created SQLite file.
}
\description{
This helper connects to a running AquaCache PostgreSQL database and writes a small subset of records to a SQLite file.  It is intended for package tests or examples where a local database is required but only a few locations are needed.
}
\details{
Only the specified locations are kept from the source database.  Continuous data is copied from \code{continuous.timeseries} and \code{continuous.measurements_continuous} while discrete data is copied from \code{discrete.samples} and \code{discrete.results}.  Lookup tables such as \code{grade_types}, \code{approval_types}, \code{qualifier_types}, \code{sample_types}, and other discrete metadata tables are also copied in full.  Continuous measurement views (\verb{measurements_*_corrected}) are materialized as regular tables.
}
\examples{
\dontrun{
pg <- AquaConnect()
create_aquacache_sqlite(pg, "aquacache_test.sqlite",
  continuous_locations = "09EA004",
  discrete_locations = "09AA004")
DBI::dbDisconnect(pg)
}
}
